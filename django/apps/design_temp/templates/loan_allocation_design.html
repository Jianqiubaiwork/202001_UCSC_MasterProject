{% extends 'basis/base.html' %}
{% load static %}

{% block style %}
<style>
/*  
Thanks to: Usama Tahir
https://medium.com/@AmJustSam
*/

@import url(https://fonts.googleapis.com/css?family=Noto+Sans:400,700);

*{
box-sizing: border-box;
 margin: 0;
 padding: 0;
}

html{
    width: 100vw;
    height: 100vh;
}

/* =============================
CSS which you need for blurred box
=============================== */
body{
 background-repeat: no-repeat;
 background-attachment: fixed;
 background-size: cover;
 background-position: top;
 background-image:url('/static/img/bg-masthead.jpg');
 width: 100%;
 height: 100%;
 font-family: Arial, Helvetica;
 letter-spacing: 0.02em;
  font-weight: 400;
 -webkit-font-smoothing: antialiased; 
}

.custom-bank-manager-icon{
  width: 100px;
  height: 100px;
  position: relative;
  border-radius: 50%;
  background-size: contain;
  background-image: url('/static/img/bank_manager_icon.jpg');
}

.custom-info{
  margin-top: 15px;
  margin-bottom: 15px;
  /*color: #64a19d;*/
  color: black;
  text-shadow: 0 0 10px white;
  opacity: 0.7;
}

.card {
    background-color: rgba(255, 255, 255, 0.6);
    position: absolute;
}


/* =============================
CSS which you need for anamation slider
=============================== */

.items{
    white-space: nowrap;
    transition: transform 1s ease-in-out;
}

.item{
  padding: 30px 20px;
  display: inline-block;
  width: 100%;
  height: 100%;
  letter-spacing: -0.03em;
  line-height: 1;
  font-weight: bold;
  background-size: cover;
  background-position: 50% 50%;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
  /*
  &:nth-child(2) {
    color: #fff;
  }
  */
}

#id_money_in_total{
  width: 120px;
  height: 36px;
  opacity: 0.4;
  border-radius: 2px;
  /*padding: 5px 15px;*/
  border: 2;
  border-color: white;
}
</style>
{% endblock %}

{% block body %}
<div class="container-fluid" style="height: 100%; width: 100%;">
    <div class="row" style="height: 10%;">
        <div class="col-1 d-flex align-items-center justify-content-center">
            <a href="/#design">
                <svg class="bi bi-arrow-counterclockwise" width="2em" height="2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M12.83 6.706a5 5 0 00-7.103-3.16.5.5 0 11-.454-.892A6 6 0 112.545 5.5a.5.5 0 11.91.417 5 5 0 109.375.789z" clip-rule="evenodd"/>
                    <path fill-rule="evenodd" d="M7.854.146a.5.5 0 00-.708 0l-2.5 2.5a.5.5 0 000 .708l2.5 2.5a.5.5 0 10.708-.708L5.707 3 7.854.854a.5.5 0 000-.708z" clip-rule="evenodd"/>
                </svg>
                Cancel
            </a>
        </div>
    </div>
    <div class="row" style="height: 90%;">
        <div id="carouselControls" class="carousel slide" data-ride="carousel" data-interval="false" style="width: 100%;">
            <div class="row" style="height: 10%;">
            </div>
            <div class="carousel-inner d-flex justify-content-center align-items-center" style="height: 90%;">
                <form action="/design/loan_allocation_design/" method="post" style="width: 100%; height: 100%;">
                    {% csrf_token %}
                    <div class="carousel-item active" style="height: 100%;">
                        <div class="row" style="height: 25%;">
                            <div class="col d-flex justify-content-center align-items-center">
                                <span class="custom-bank-manager-icon"></span>
                            </div>
                        </div> 
                        <div class="row" style="height: 25%;">
                            <div class="col d-flex justify-content-center align-items-center">
                                <div class="custom-info">
                                    <h1>You are a bank manager,</h1>
                                </div>
                            </div>
                        </div> 
                        <div class="row" style="height: 25%;">
                            <div class="col d-flex justify-content-center align-items-center">
                                <div class="custom-info">
                                    <h3>and you have &nbsp;$</h3>
                                </div>
                                <div>
                                    {{ loan_allocation_design_form.money_in_total }}
                                </div>
                                <div class="custom-info">
                                    <h3> &nbsp; for loan allocation.</h3>
                                 </div>
                            </div>
                        </div>  
                        <div class="row" style="height: 25%;">
                        </div>  
                    </div>
                    <div class="carousel-item card" style="height: 100%;">
                        <div class="row card-header"  style="height: 10%;">
                            <div class="col">
                                <div class="row justify-content-center" style="height: 50%;">
                                    <div>You had two clients to apply loans at the same time. </div>
                                </div>
                                <div class="row justify-content-center" style="height: 50%;">
                                    <div>The two clients' information are designed as below.</div>
                                </div>
                            </div>
                        </div>
                        <div class="row card-body" style="height: 70%;">
                                <div class="row" style="height: 10%; width: 100%;">
                                </div>
                                <div class="row" style="height: 90%; width: 100%;">
                                    <div class="col-6 border border-dark">
                                        <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                            <div> 
                                                Person A
                                            </div>
                                        </div>
                                        <div class="row" style="height: 90%;">
                                            <div class="col-6">
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.name_A.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.race_A.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.gender_A.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.age_A.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.rate_A.label }} 
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="row  d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.name_A }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.race_A }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.gender_A }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.age_A }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.rate_A }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 border border-dark" style="height: 100%;">
                                        <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                            <div> 
                                                Person B
                                            </div>
                                        </div>
                                        <div class="row" style="height: 90%;">
                                            <div class="col-6">
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.name_B.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.race_B.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.gender_B.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.age_B.label }} 
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.rate_B.label }} 
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="row  d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.name_B }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.race_B }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.gender_B }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.age_B }}
                                                    </div>
                                                </div>
                                                <div class="row d-flex align-items-center justify-content-center" style="height: 10%;">
                                                    <div> 
                                                        {{ loan_allocation_design_form.rate_B }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div> 
                        <div class="row card-footer" style="height: 20%;">
                            <div class="col-12">
                                <div class="row d-flex justify-content-center">
                                    <div class="w-75">
                                        <input type="range" class="custom-range" id="slideBar" min="0" max="1000">
                                      </div>
                                      <span class="font-weight-bold ml-2 moneyA"></span>&nbsp; <div>:</div> 
                                      <span class="font-weight-bold ml-2 moneyB"></span>
                                </div>
                                <div class="row d-flex justify-content-center">
                                    <input class="btn btn-primary" type="submit" value="Submit">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                
            </div>
            <a class="carousel-control carousel-control-prev btn btn-primary" 
                href="#" role="button" data-slide="prev"
                style="height: 10%; width: 50%;">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control carousel-control-next btn btn-primary" 
                href="#" role="button" data-slide="next"
                style="height: 10%; width: 50%;">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
</div>

{% block custom %}
<!--
    =================================
    load src
    =================================
-->
<script src="/static/vendor/jquery/jquery.min.js"></script>
<script src="/static/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/ajax/libs/modernizr/modernizr.min.js"></script>

<script>
const $moneyTotal = $('#id_money_in_total');
const $moneyA = $('.moneyA');
const $moneyB = $('.moneyB');
const $slideBar = $('#slideBar');

$(document).ready(function() {
    $moneyA.html($slideBar.val());
    $slideBar.on('input change', () => {
        $moneyA.html($slideBar.val());
        $moneyB.html($moneyTotal.val() - $slideBar.val());
    });
});
</script>

<script>
    $moneyTotal.on('change keyup', function() {
    if( !$(this).val() ) {
        $(".carousel-control").attr("href", "#");
    }
    else {
        //console.log($(this).val());
        //console.log($("#slideBar"));
        $("#slideBar").attr("max", $(this).val());
        $moneyA.html($slideBar.val());
        $moneyB.html($moneyTotal.val() - $slideBar.val());
        $(".carousel-control").attr("href", "#carouselControls");
    }
});
</script>

{% endblock %}

{% endblock %}