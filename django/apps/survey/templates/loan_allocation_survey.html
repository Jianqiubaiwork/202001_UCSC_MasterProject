{% extends 'base.html' %}
{% load static %}

{% block style %}
<style>
  @media (max-width: 768px) {
    .btn {
      font-size:5px;
      padding:4px 6px;
    }
  }
  
  @media (min-width: 768px) {
    .btn {
      font-size:6x;
      padding:6px 12px;
    }
  }
  
  @media (min-width: 992px) {
    .btn {
      font-size:7px;
      padding:8px 12px;
    }
  }
  
  @media (min-width: 1200px) {
    .btn {
      padding:10px 16px;
      font-size:12px;
    }
  }
  
  .card-body {
    padding: 0.5rem;
  }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid mt-10" style="height: 90%; margin-top: 4rem;">
  <div class="card w-100" style="height: 100%;">
    <div class="card-header text-center">
      <label><strong>Loan Allocation</strong></label>
      <ul class="nav nav-tabs">
        <li id="tab1" class="active"><a data-toggle="tab" href="#study1">
          <button class="btn btn-primary" onclick="hideSubmitBtn()">Study1</button>
        </a></li>
        <li id="tab2"><a data-toggle="tab" href="#study2">
          <button class="btn btn-primary" onclick="showSubmitBtn()">Study2</button>
        </a></li>
        <!-- Button trigger modal -->
        <button id="reviewBtn" type="button" class="btn btn-success" data-toggle="modal" data-target="#submissionForm">
          Review
        </button>
        <!-- Modal -->
        <div class="modal fade" 
        id="submissionForm" 
        data-backdrop="static" 
        tabindex="-1" 
        role="dialog" 
        aria-labelledby="submissionFormLabel" 
        aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <form action="/scenarios/loan_allocation/" method="post">
                {% csrf_token %}
                <div class="modal-header">
                  <h5 class="modal-title" id="submissionFormLabel">Review Your Submission</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-md-10 text-left">
                      {{ loan_allocation_answer_form.one_one_score.label }}
                    </div>
                    <div class="col-md-2 text-left">
                      {{ loan_allocation_answer_form.one_one_score }}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-10 text-left">
                      {{ loan_allocation_answer_form.one_two_score.label }}
                    </div>
                    <div class="col-md-2 text-left">
                      {{ loan_allocation_answer_form.one_two_score }}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-10 text-left">
                      {{ loan_allocation_answer_form.one_three_score.label }}
                    </div>
                    <div class="col-md-2 text-left">
                      {{ loan_allocation_answer_form.one_three_score }}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-10 text-left">
                      {{ loan_allocation_answer_form.two_one_score.label }}
                    </div>
                    <div class="col-md-2 text-left">
                      {{ loan_allocation_answer_form.two_one_score }}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-10 text-left">
                      {{ loan_allocation_answer_form.two_two_score.label }}
                    </div>
                    <div class="col-md-2 text-left">
                      {{ loan_allocation_answer_form.two_two_score }}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-10 text-left">
                      {{ loan_allocation_answer_form.two_three_score.label }}
                    </div>
                    <div class="col-md-2 text-left">
                      {{ loan_allocation_answer_form.two_three_score }}
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <input type="submit" class="btn btn-primary" value="Submit">
                </div>
              </form>
            </div>
          </div>
        </div>
      </ul>
      <!--
      <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated" 
        role="progressbar" 
        style="width: 1%"
        aria-valuenow="1" 
        aria-valuemin="0" 
        aria-valuemax="100">
        </div>
      </div>
      -->
    </div>
    <div class="card-body">
      <div class="tab-content">
        <div id="study1" class="tab-pane fade in active">
          <div class="row">
            <div class="col-md-12">
                <h6><strong>scenario</strong></h6>
                <div class="card" style="height: 70%;">
                    <div class="card-body text-center">
                      <p align="justify">
                        There are two candidates - Person A and Person B, 
                        they are identical in every way, 
                        expect that Person A has a loan repayment rate of 100%,
                        while person B has a loan repayment rate of 20%. 
                      </p>
                      <p align="justify">
                        Both of them have applied for a $50,000 loan to start a business,
                        and the loan office only has $50,000.
                      </p>
                    </div>
                </div>
            </div>
          </div>
          <div class="row">
          <div class="col-md-12">
              <h6><strong>question</strong></h6>
              <div class="card" style="height: 70%;">
                  <div class="card-body text-center">
                    <p align="justify">
                      To what extent do you think the following dicisions are fair?
                    </p>
                    <p align="justify">
                      For each decision, please include how fair you think the dicision is 
                      by dragging the slider bar to a point on the line,
                      where 1 means "not fair at all",
                      and 9 means "completely fair".
                    </p>
                  </div>
              </div>
          </div>
          </div>
          <div class="row">
          <div class="col-md-12">
              <h6><strong>answer</strong></h6>
              <div class="card" style="height: auto;">
                <div class="card-body text-center">
                  <div class="row">
                    <div class="col-md-1">
                      <a class="carousel-control-prev btn btn-primary" 
                      href="#answerCarousel1" 
                      role="button" 
                      data-slide="prev"
                      style="width: 50%; margin-left: 1rem;">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      </a>
                    </div>
                    <div class="col-md-10">
                      <div id="answerCarousel1" class="carousel slide" data-ride="">
                        <ol class="carousel-indicators">
                          <li data-target="#answerCarousel1" data-slide-to="0" class="active"></li>
                          <li data-target="#answerCarousel1" data-slide-to="1"></li>
                          <li data-target="#answerCarousel1" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                          <div class="carousel-item active">
                            <p>
                              1. The loan officer has decided to give all the money ($50,000) to Person A. <br>
                              &nbsp;
                            </p>
                            <div class="d-flex justify-content-center">
                              <form class="range-field w-100">
                                {% csrf_token %}
                                <input id="slider11" class="border-0" type="range" min="1" max="9" style="width: 60%;" />
                                <span class="font-weight-bold text-primary ml-2 mt-1 valueSpan11"></span>
                              </form>
                            </div>
                          </div>
                          <div class="carousel-item">
                            <p align="justify" class="text-center">
                              2. The loan officer has decided to split the money 50/50 between the two candidates, <br>
                              giving $25,000 to Person A and $25,000 to Person B.
                            </p>
                           
                            <div class="d-flex justify-content-center">
                              <form class="range-field w-100">
                                {% csrf_token %}
                                <input id="slider12" class="border-0" type="range" min="1" max="9" style="width: 60%;"/>
                                <span class="font-weight-bold text-primary ml-2 mt-1 valueSpan12"></span>
                              </form>
                            </div>
                          </div>
                          <div class="carousel-item">
                            <p align="justify" class="text-center">
                              3. The loan officer has decided to give Person A $41,666, which is propotional to that person's payback <br>
                              rate of 100%, and give Person B $8,333, which is propotional to that person's payback rate of 20%.
                            </p>
                            <div class="d-flex justify-content-center">
                              <form class="range-field w-100">
                                {% csrf_token %}
                                <input id="slider13" class="border-0" type="range" min="1" max="9" style="width: 60%;"/>
                                <span class="font-weight-bold text-primary ml-2 mt-1 valueSpan13"></span>
                              </form>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-1">
                      <a class="carousel-control-next btn btn-primary" 
                        href="#answerCarousel1" 
                        role="button" 
                        data-slide="next"
                        style="width: 50%; margin-right: 1rem;">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          </div>
          <!--
          <div class="row mt-3 align-items-center">
            <div class="col-md-12 text-center">
              <a data-toggle="tab" href="#study2">
                <button class="btn btn-primary" onclick="showSubmitBtn()">Goto Study2</button>
              </a>
            </div>
          </div>
          -->
        </div>
        <div id="study2" class="tab-pane fade in active">
          <div class="row">
            <div class="col-md-12">
                <h6><strong>scenario</strong></h6>
                <div class="card" style="height: 85%;">
                    <div class="card-body text-center">
                      <p align="justify">
                        There are two candidates - Person A and Person B, 
                        they are identical in every way, 
                        expect that Person A has a loan repayment rate of 100%,
                        while person B has a loan repayment rate of 20%. 
                      </p>
                      <p align="justify">
                        Both of them have applied for a $50,000 loan to start a business,
                        and the loan office only has $50,000.
                      </p>
                      <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">Person</th>
                            <th scope="col">Gender</th>
                            <th scope="col">Race</th>
                            <th scope="col">Individual Loan Repayment Rate</th>
                            <th scope="col">Amount Request</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row">A</th>
                            <td>Male</td>
                            <td>White</td>
                            <td>70%</td>
                            <td>%50,000</td>
                          </tr>
                          <tr>
                            <th scope="row">B</th>
                            <td>Male</td>
                            <td>Black</td>
                            <td>40%</td>
                            <td>%50,000</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                </div>
            </div>
          </div>
          <div class="row">
          <div class="col-md-12">
              <h6><strong>question</strong></h6>
              <div class="card" style="height: 70%;">
                  <div class="card-body text-center">
                    <p align="justify">
                      To what extent do you think the following dicisions are fair?
                    </p>
                    <p align="justify">
                      For each decision, please include how fair you think the dicision is 
                      by dragging the slider bar to a point on the line,
                      where 1 means "not fair at all",
                      and 9 means "completely fair".
                    </p>
                  </div>
              </div>
          </div>
          </div>
          <div class="row">
          <div class="col-md-12">
              <h6><strong>answer</strong></h6>
              <div class="card" style="height: auto;">
                <div class="card-body text-center">
                  <div class="row">
                    <div class="col-md-1">
                      <a class="carousel-control-prev btn btn-primary" 
                      href="#answerCarousel2" 
                      role="button" 
                      data-slide="prev"
                      style="width: 50%; margin-left: 1rem;">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      </a>
                    </div>
                    <div class="col-md-10">
                      <div id="answerCarousel2" class="carousel slide" data-ride="">
                        <ol class="carousel-indicators">
                          <li data-target="#answerCarousel2" data-slide-to="0" class="active"></li>
                          <li data-target="#answerCarousel2" data-slide-to="1"></li>
                          <li data-target="#answerCarousel2" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                          <div class="carousel-item active">
                            <p>
                              1. The loan officer has decided to give all the money ($50,000) to Person A. <br>
                              &nbsp;
                            </p>
                            <div class="d-flex justify-content-center">
                              <form class="range-field w-100">
                                {% csrf_token %}
                                <input id="slider21" class="border-0" type="range" min="1" max="9" style="width: 60%;" />
                                <span class="font-weight-bold text-primary ml-2 mt-1 valueSpan21"></span>
                              </form>
                            </div>
                          </div>
                          <div class="carousel-item">
                            <p align="justify" class="text-center">
                              2. The loan officer has decided to split the money 50/50 between the two candidates, <br>
                              giving $25,000 to Person A and $25,000 to Person B.
                            </p>
                           
                            <div class="d-flex justify-content-center">
                              <form class="range-field w-100">
                                {% csrf_token %}
                                <input id="slider22" class="border-0" type="range" min="1" max="9" style="width: 60%;"/>
                                <span class="font-weight-bold text-primary ml-2 mt-1 valueSpan22"></span>
                              </form>
                            </div>
                          </div>
                          <div class="carousel-item">
                            3. The loan officer has decided to give Person A $31,818, which is propotional to that person's payback
                              rate of 70%, and give Person B $18,181, which is propotional to that person's payback rate of 40%.
                            <div class="d-flex justify-content-center">
                              <form class="range-field w-100">
                                {% csrf_token %}
                                <input id="slider23" class="border-0" type="range" min="1" max="9" style="width: 60%;"/>
                                <span class="font-weight-bold text-primary ml-2 mt-1 valueSpan23"></span>
                              </form>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-1">
                      <a class="carousel-control-next btn btn-primary" 
                        href="#answerCarousel2" 
                        role="button" 
                        data-slide="next"
                        style="width: 50%; margin-right: 1rem;">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          </div>
        </div>
      </div>
    </div> 
    <div class="card-footer">
    </div>
  </div>
</div>
{% endblock %}

{% block custom %}
<script>
    $( document ).ready(function() {
      const $valueSpan11 = $('.valueSpan11');
      const $value11 = $('#slider11');
      $valueSpan11.html($value11.val());
      $value11.on('input change', () => {

      $valueSpan11.html($value11.val());
      });

      const $valueSpan12 = $('.valueSpan12');
      const $value12 = $('#slider12');
      $valueSpan12.html($value12.val());
      $value12.on('input change', () => {

      $valueSpan12.html($value12.val());
      });

      const $valueSpan13 = $('.valueSpan13');
      const $value13 = $('#slider13');
      $valueSpan13.html($value13.val());
      $value13.on('input change', () => {

      $valueSpan13.html($value13.val());
      });

      const $valueSpan21 = $('.valueSpan21');
      const $value21 = $('#slider21');
      $valueSpan21.html($value21.val());
      $value21.on('input change', () => {

      $valueSpan21.html($value21.val());
      });

      const $valueSpan22 = $('.valueSpan22');
      const $value22 = $('#slider22');
      $valueSpan22.html($value22.val());
      $value22.on('input change', () => {

      $valueSpan22.html($value22.val());
      });

      const $valueSpan23 = $('.valueSpan23');
      const $value23 = $('#slider23');
      $valueSpan23.html($value23.val());
      $value23.on('input change', () => {

      $valueSpan23.html($value23.val());
      });

      $('.carousel').carousel({
        interval: false
      });

      document.getElementById("study1").classList.add("show");
      document.getElementById("reviewBtn").style.display = "none";
    });
</script>

<script>
  function hideSubmitBtn() {
    document.getElementById("reviewBtn").style.display = "none";
  };

  function showSubmitBtn() {
    document.getElementById("reviewBtn").style.display = "block";
  };

  $("#reviewBtn").click(function() {
    document.getElementById("id_one_one_score").value = document.getElementById("slider11").value;
    document.getElementById("id_one_two_score").value = document.getElementById("slider12").value;
    document.getElementById("id_one_three_score").value = document.getElementById("slider13").value;
    document.getElementById("id_two_one_score").value = document.getElementById("slider21").value;
    document.getElementById("id_two_two_score").value = document.getElementById("slider22").value;
    document.getElementById("id_two_three_score").value = document.getElementById("slider23").value;
  });
</script>


<!--
<script>
    var selectedOption = document.getElementById('selectedOption');
    
    $('#oneA').click(function (e) {
        selectedOption.value = "you have chosen A";
    });

    $('#oneB').click(function (e) {
        selectedOption.value = "you have chosen B";
    });

    $('#oneC').click(function (e) {
        selectedOption.value = "you have chosen C";
    });

    $('#submitButton').click(function (e) {
        alert('implementing the post method here');
    });

    $('#scenarioTitle').on('keydown', function(e) {
        if (e.which == 13) {
            e.preventDefault();
            alert('you have named your scenario: \n'+document.getElementById('scenarioTitle').value);
        }
    });
</script>
-->
{% endblock %}